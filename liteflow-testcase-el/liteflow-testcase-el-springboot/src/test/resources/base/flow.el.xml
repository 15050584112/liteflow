<?xml version="1.0" encoding="UTF-8"?>
<flow>
    <chain name="chain1">
        THEN(a,b,WHEN(c,d))
    </chain>

    <chain name="chain2">
        THEN(
            a,b,
            SWITCH(e).to(d,f)
        )
    </chain>

    <chain name="chain3">
        THEN(
            a,
            WHEN(
                c,
                SWITCH(g).to(b, d, THEN(h,i).id("then_1001"))
            )
        )
    </chain>

    <chain name="chain4">
        THEN(
            a,b,
            WHEN(
                THEN(c, WHEN(j,k)),
                d,
                THEN(h, i)
            ),
            SWITCH(x).to(
                m,
                n,
                WHEN(q, THEN(p, r)).id("w01")
            ),
            z
        )
    </chain>
</flow>